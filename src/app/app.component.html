<div class="container">
  <!-- HEADER -->
  <header class="header">
    <div class="sub-container">
      <span>
        Semana de Gasto
        {{ titleWeek?.weekNumber }}
        <strong>{{ titleWeek?.month | titlecase }}</strong>
        {{ titleWeek?.year }}
      </span>
    </div>
    <div class="sub-container">
      <div class="content">
        <app-custom-date-picker
          (selectWeek)="onChangeDate($event)"
        ></app-custom-date-picker>
      </div>
    </div>
    <div class="sub-container">
      <div class="actions">
        <button (click)="onSaveTemporality()">Borrados</button>
        <button (click)="onTest()">Completado</button>
      </div>
    </div>
  </header>

  <!-- CONTENIDO PRINCIPAL -->
  <div
    class="content main-content"
    [style.flex-basis]="
      bottomPanelOpen ? 100 - bottomPanelHeight + '%' : '100%'
    "
  >
    <div class="left">
      <mat-form-field appearance="outline">
        <mat-label>Departamento</mat-label>
        <mat-select>
          @for (departament of service.departamentsPending; track departament) {
          <mat-option [value]="departament">{{ departament }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
      <app-card
        *ngFor="let folio of service.folios$ | async"
        [dataCard]="folio"
      ></app-card>
    </div>
    <div class="center">
      <app-calendario
        style="
          width: 100%;
          height: 100%;
          flex: 1;
          display: flex;
          flex-direction: column;
        "
        [titleWeek]="titleWeek"
      ></app-calendario>
    </div>
  </div>

  <!-- DIVISOR RESIZABLE -->
  <div
    *ngIf="bottomPanelOpen"
    class="resizer"
    (mousedown)="startResize($event)"
  ></div>

  <!-- SECCIÓN INFERIOR COLAPSABLE -->
  <div
    class="bottom-section"
    [class.open]="bottomPanelOpen"
    [class.closed]="!bottomPanelOpen"
    [style.height.px]="bottomPanelOpen ? bottomPanelHeight : 0"
  >
    <div class="days-header" *ngIf="bottomPanelOpen">
      <h3>Detalles de la Semana</h3>
      <button class="close-btn" (click)="toggleBottomPanel()">✕</button>
    </div>
    <div class="days-content" *ngIf="bottomPanelOpen">
      <p>Resumen o detalles de la semana</p>
    </div>
  </div>

  <!-- BOTÓN FLOTANTE PARA ABRIR -->
  <button
    *ngIf="!bottomPanelOpen"
    class="floating-btn"
    (click)="toggleBottomPanel()"
    title="Mostrar detalles"
  >
    ▲
  </button>
</div>
